<!doctype html>
<html>
        <head>
                <title>Edit Your Workout</title>
                <meta charset="utf-8"/>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <link rel ="stylesheet" href = "style.css"/>
        </head>

<body>
    <nav>
        <ul class="nav"> 
          <li> <a href="track.html"> Track your Workouts </a></li>
          <li> <a href="search.html"> Search for Exercises </a></li>
          <li> <a href="edit.html"> Edit Your Workout </a></li>
          <li> <a href="view.html"> View Your Workout Plan </a></li>

        </ul>
      </nav>

      <h2>This should be a list of the exercises the user currently has in their database/table</h2>

      <form>
        <label> Would you like to edit or delete an exercise? <br> <br>
                <input id = "edit" type="radio" name="adddelete" value="edit">
                Edit
              </label>
              <label>
                <input id = "delete" type="radio" name="adddelete" value="delete">
                Delete
        </label>
        <div id = "new"> 

        </div>
         </form>



<script>
  // Get the "yes" and "no" radio buttons
  yesRadio = document.getElementById('edit');
  noRadio = document.getElementById('delete');
  
  // Add an event listener for when a radio button is selected
  yesRadio.addEventListener('change', function() {
    // Code to perform when "yes" is selected
    str = "<h3> Which exercise would you like to edit? </h3> <br>";
    str += "<input id = 'extra' type= 'text' name='toDelete'> <br> <br>";
    str += "<h4> Would you like to change the number of reps or number of sets? </h4>";
    str += "<input id = 'reps' type='checkbox' name='reporset' value='Reps'> Reps";
    str += "<input id = 'sets' type='checkbox' name='reporset' value='Sets'> Sets <br> <br>";
    str += "<div id = 'inforeps'> </div> <br> <br> ";
    str += "<div id = 'infosets'> </div> <br> <br> ";
    str += "<input class = 'tracker' type = 'submit' value = 'Make Change'> </input>";
    document.getElementById("new").innerHTML = str;
    reps = document.getElementById("reps");
        sets = document.getElementById("sets");


        reps.addEventListener('change', function() {
          if (this.checked) {
            str = "Please enter the new number of reps <input type= 'text' name='changing'> ";
            document.getElementById("inforeps").innerHTML  = str;
            document.getElementById("inforeps").display  = "block";
            
            
          }
          else {
            document.getElementById("inforeps").display = "none";
            console.log("in display none");
            document.getElementById("inforeps").innerHTML  = "";

          }
        console.log("here");

        
});

sets.addEventListener('click', function() {

  if (this.checked) {
    str = "Please enter the new number of sets <input type= 'text' name='changing'>";
    document.getElementById("infosets").innerHTML  = str;
    document.getElementById("infosets").display  = "block";

  }
  else {
    document.getElementById("infosets").display = "none";
    document.getElementById("infosets").innerHTML  = "";
  }
   

});

  });
  
  noRadio.addEventListener('change', function() {
        str = "<h3> Which exercise would you like to delete? </h3> <br> <br>";
        str += "<input type= 'text' name='toDelete'> <br> <br>";
        str += "<input class = 'tracker' type='submit' value = 'Delete'>";
    // Code to perform when "no" is selected
    document.getElementById("new").innerHTML  = str;
    console.log('No was selected');
  });

  const form = document.getElementById("extra");
      alert("got the form");
      // form.addEventListener('submit', async (event) => {
        alert("in event listener");
        event.preventDefault();

        // const formData = new FormData(form);
        const data = {
          name: form.innerHTML,
          date: formData.get('date'), //?? not sure here, can add a line that does this
          reps: formData.get('reps'),
          sets: formData.get('sets'),
          other:undefined
        };
        alert(formData.get('exercisename'));
        try {
          alert("in fetch");
          const response = await fetch('http://localhost:8080/exercise', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            // body: {
            //   "name": formData.get('exercisename'),
            //   "date": formData.get('date'),
            //   "reps": formData.get('reps'),
            //   "sets": formData.get('sets'),
            //   "other":formData.get('other')
            // }
            body : JSON.stringify(data),
          });
          alert("after fetch");
          if (response.status === 400) {
            // errorMessage.textContent = await response.text();
            // errorMessage.style.display = 'block';
            // successMessage.style.display = 'none';
            alert("got an error");
          } else if (response.status === 200) {
            alert("it went fine");
          } else {
            errorMessage.style.display = 'none';
            alert( 'Thanks for registering!');
            successMessage.style.display = 'block';
          }
        } catch (error) {
          console.error('Error submitting the form:', error);
        }
      // });

  // valid = document.getElementsByName("toDelete");





</script>

</body>

</html>
